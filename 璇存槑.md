# UI编程测试 - 背包系统实现说明

## 测试目标
本测试旨在评估中高级UI程序员的技术能力，重点考察UI架构设计思维和代码实现质量。

## 核心任务：实现鱼类收集背包系统

### 1. 背包系统基础功能

#### 1.1 收集机制
- 当玩家（红色方块鲨鱼）吃到 **SpecialFish**（特殊鱼）时，将其添加到背包中
- 每条 SpecialFish 都有独特属性：
  - **inventoryGridSize** (Vector2Int)：在背包格子中占用的矩形区域大小
  - **颜色**：每条鱼有随机生成的独特颜色
  - **大小**：视觉上比普通鱼大2倍，速度快2倍

#### 1.2 背包显示要求
- 使用 **Tab** 键打开/关闭背包界面
- 背包打开时游戏暂停，关闭时恢复
- 将收集到的鱼以**圆形或椭圆形图片**形式显示在背包格子中
- 保持每条鱼的原始颜色，让玩家能够识别不同的鱼
- 正确显示鱼在格子中的占用情况（如2x3格子）

### 2. 背包空间管理

#### 2.1 智能放置逻辑
- 实现类似俄罗斯方块的空间管理系统
- 当新的鱼被收集时，自动寻找合适的空位
- **如果背包中没有足够的连续空格容纳新鱼，则不将其加入背包**
- 需要考虑鱼的矩形占用区域（例如：2x3格子的鱼需要找到2列3行的连续空格）

#### 2.2 空间优化算法（加分项）
- 实现最优放置算法，最大化背包空间利用率
- 显示背包容量和当前占用情况

### 3. 交互功能

#### 3.1 拖拽系统
- **拖拽丢弃**：玩家可以将鱼从背包拖出并丢弃
- **位置交换**：玩家可以拖拽鱼到新位置，如果空间足够则移动
- **自动交换**：如果目标位置有其他鱼，尝试交换位置（如果空间允许）

#### 3.2 背包整理
- 提供一键整理功能（可选）
- 整理时自动优化鱼的排列，减少碎片空间

### 4. 可选任务

#### 4.1 小地图系统
实现一个实时小地图，展示游戏世界的缩略视图：

- **显示要求**：
  - 以鲨鱼（玩家）为中心
  - 显示鲨鱼的朝向（可用箭头或三角形表示）
  - 区分普通鱼和特殊鱼（大小差异）
  - 实时更新所有实体位置

#### 4.2 血条系统
为所有鱼添加动态血条显示：

- **显示要求**：
  - 鱼的HP实时显示（当前鱼会随时间减少HP）
  - 血条颜色渐变（绿→黄→红）
  - 世界空间UI跟随
  - 优雅的显示/隐藏逻辑（如：仅显示受伤的鱼）

#### 4.3 UI动画系统
实现流畅的UI动画和过渡效果：

- **动画要求**：
  - 背包打开/关闭的过渡动画
  - 物品拖拽的视觉反馈（缩放、半透明）
  - 物品获得时的飞入动画

### 5. 技术要求重点 ⚠️

> **重要提示：** 本测试的重要评估点是 **UI架构设计能力**，而非单纯的功能实现。

> **代码修改说明：** 在保证游戏功能的前提下，您可以任意修改现有代码和资源，以实现最佳的架构设计。

### 6. 编写简要的实现说明
 - 架构设计思路
 - 关键技术决策
 - 已知限制或待优化点

祝您测试顺利！